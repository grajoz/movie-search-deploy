!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(2),e.exports=n(1)},function(e,t){},function(e,t,n){"use strict";n.r(t);class a{constructor(e){this.resultSearch=e}createPoster(){const{title:e}=this.resultSearch,{img:t}=this.resultSearch,{year:n}=this.resultSearch,{imdbID:a}=this.resultSearch;let r=document.createElement("div");const s=document.createElement("h2"),c=document.createElement("div"),o=document.createElement("img"),i=document.createElement("p");return r.classList.add("poster"),r.setAttribute("src","https://www.imdb.com/title/"+a),s.textContent=e,o.classList.add("poster__img"),o.setAttribute("alt",e),o.setAttribute("src",t),i.textContent=n,c.append(o),r.append(s),r.append(c),r.append(i),r}}class r{constructor(e){this.dataSearch=e}async getResultSearch(){const{dataSearch:e}=this;let t,n,a,r,s;try{let n=await fetch(`https://www.omdbapi.com/?s=${e}&apikey=aab7b845`);t=await n.json()}catch(e){document.getElementById("error").textContent=e,document.getElementById("error").classList.remove("none")}let c=!1,o=[];return c=t.Response.toLowerCase(),"false"===c&&(c=!1),c?t.Search.forEach((e,c)=>{n=t.Search[c].Title,a=t.Search[c].Poster,"N/A"==a&&(a="./img/no-poster.jpg"),console.log(a),r=t.Search[c].Year,s=t.Search[c].imdbID,o[c]={title:n,img:a,year:r,imdbID:s}}):o[0]={title:t.Error,img:"./img/noresult.png",year:"",imdbID:""},o}}class s{constructor(e,t){this.dataSearch=e,this.nodePosterNumber=t}async getRatingtSearch(){const{dataSearch:e}=this,{nodePosterNumber:t}=this,n=document.getElementById("movies");let a,r;const s=`https://www.omdbapi.com/?i=${e}&apikey=aab7b845`,c=await fetch(s);if(r=await c.json(),a=r.imdbRating,Number(a)>0){let e=n.getElementsByClassName("poster");e=Array.prototype.slice.call(e);let r=e[t],s=document.createElement("div");s.classList.add("rating");let c=document.createElement("img");c.classList.add("star"),c.setAttribute("alt","srtar"),c.setAttribute("src","./img/star.svg"),r.append(s),s.append(c),s.append(a)}return a}}class c{constructor(e,t){this.beforeTranlateDataSearch=e,this.afterTranlateDataSearch=t}validateBeforeAfter(e,t){if(e!==t)return!0}}const o=document.getElementById("movies"),i=document.getElementById("input"),l=document.getElementById("submit"),d=document.getElementById("error"),u=document.getElementById("clean"),m=document.getElementById("spinner"),f=document.getElementById("prev"),p=document.getElementById("next"),h=document.getElementById("header__help"),g=document.getElementById("help"),y=document.getElementById("translate__message");let v=[],b=1;function E(){i.focus(),i.select()}async function L(){let e;I(),o.innerHTML="",e=i.value;let t=e;d.textContent=e;const n=await fetch(`https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20200422T124843Z.080b6a504e291973.8a23faf52816f1c303da63567f732b90ec64f825&text= ${e} &lang=ru-en`),a=await n.json();e=String(a.text).toLowerCase().trim();let r=e;new c(t,r).validateBeforeAfter(t,r)&&function(e){y.classList.remove("none"),y.textContent=`Showing results for "${e}"`}(t),w(e)}function S(){y.classList.add("none")}async function w(e){let t;const n=new r(e);t=await n.getResultSearch(e),""===t[0].imdbID&&(t[0].title,x(),d.classList.remove("none"),d.textContent=`No results  "${i.value}"`),t.forEach((e,n)=>{x();const r=new a(t[n]);o.appendChild(r.createPoster(t[n])),v[n]=t[n].imdbID,async function(e,t){new s(e,t).getRatingtSearch(e,t)}(v[n],n),B(b)})}function I(){d.classList.add("none")}function B(e){let t=document.getElementsByClassName("poster");e>t.length&&(b=1),e<1&&(b=t.length);for(let e=0;e<t.length;e++)t[e].classList.remove("active");t[b-1].classList.add("active"),t[b]&&t[b].classList.add("active"),t[b+1]&&t[b+1].classList.add("active"),t[b+2]&&t[b+2].classList.add("active")}function x(){m.classList.add("none"),u.classList.remove("none")}function j(){u.classList.add("none"),m.classList.remove("none")}w("dog"),S(),E(),h.addEventListener("click",()=>{g.classList.remove("none")}),g.addEventListener("click",e=>{e.currentTarget.classList.add("none"),E()}),i.placeholder="add a movie name ",i.autocomplete="off",i.type="search",o.addEventListener("click",e=>{S();let t=e.target;t=t.parentElement,t=t.parentElement,t.hasAttribute("src")&&(t=t.getAttribute("src"),document.location.href=t)}),u.addEventListener("click",()=>{i.value="",E(),S(),I(),S()}),l.addEventListener("click",()=>{L(),j(),I(),S()}),m.addEventListener("click",()=>{x()}),document.addEventListener("keydown",e=>{"Enter"===e.code&&(L(),j(),I(),S())}),f.addEventListener("click",()=>{B(b-=1),I()}),p.addEventListener("click",()=>{B(b+=1),I()})}]);
//# sourceMappingURL=bundle.js.map